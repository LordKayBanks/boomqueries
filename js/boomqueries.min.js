/*! BoomQueries 0.0.4 | http://boomtownroi.github.io/boomqueries/ | (c) 2014 BoomTown | MIT License */
!function(e,t){"function"==typeof define&&define.amd?define(["boomQueries"],t):"object"==typeof module&&module.exports?module.exports=t():window.boomQueries=t()}(window,function(){"use strict";function e(){this.nodes=[],this.map={},window.addEventListener("resize",this.debounce(this,this.update,100),!1)}return e.prototype.debounce=function(e,t,o,n){var s;return function(){var i=arguments,r=function(){s=null,n||t.apply(e,i)},d=n&&!s;clearTimeout(s),s=setTimeout(r,o),d&&t.apply(e,i)}},e.prototype.update=function(e){var t={};"undefined"!=typeof e&&(t.detail=e);var o=new CustomEvent("checkyourself",t);this.nodes.forEach(function(e){e.dispatchEvent(o)})},e.prototype._add=function(e,t,o){void 0===e.breaks&&(e.breaks=t,null!==o&&(e.selector=o),e.addEventListener("checkyourself",function(){if(null!==this.offsetParent){for(var e=this.breaks.length,t=this.offsetWidth,o=-1;e--;)t>=this.breaks[e][0]&&o++,this.classList.remove(this.breaks[e][1]);o>=0&&this.classList.add(this.breaks[o][1]);var n={detail:{offsetWidth:t,currentBreak:this.breaks[o]}},s=new CustomEvent("nodeUpdated",n);this.dispatchEvent(s)}}),e.addEventListener("cleanup",function(){var e=this;this.breaks.forEach(function(t){e.classList.remove(t[1])})}),this.nodes.push(e))},e.prototype._addSelector=function(e,t){this.map[e]=t;var o=document.querySelectorAll(e),n=this;Array.prototype.forEach.call(o,function(o){n._add(o,t,e)})},e.prototype.add=function(e,t,o){if("string"==typeof e)this._addSelector(e,t);else{var n=null,s=this;"undefined"!==o&&(n=o),e.constructor===Array?e.forEach(function(e){s._add(e,t,n)}):this._add(e,t,n)}this.update()},e.prototype.refresh=function(){this.remove();var e=Object.keys(this.map),t=this;e.forEach(function(e){t._addSelector(e,t.map[e])}),this.update()},e.prototype._delete=function(e){return this.nodes[e].dispatchEvent(new CustomEvent("cleanup")),this.nodes[e].removeEventListener("checkyourself"),this.nodes[e].removeEventListener("cleanup"),this.nodes.splice(e,1),!0},e.prototype.remove=function(e){if(void 0!==e){for(var t=this.nodes.length;t--;)this.nodes[t].selector===e&&this._delete(t);this.map.hasOwnProperty(e)&&delete this.map[e]}else for(var t=this.nodes.length;t--;)document.body.contains(this.nodes[t])||this._delete(t)},e.prototype.get=function(e){for(var t=this.nodes.length;t--;)if(this.nodes[t].selector===e)return this.nodes[t]},e.prototype.inspect=function(e){"undefined"!=typeof console&&console.log("map"===e?this.map:this.nodes)},new e});